<div class="login-container">
  <div class="login-card">
    <p-card>
      <ng-template pTemplate="header">
        <div class="logo-container">
          <img src="assets/images/logo.png" alt="LKP Logo" class="logo" />
          <h2>Plataforma de Conocimiento para Laboratorios</h2>
        </div>
      </ng-template>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div class="p-fluid">
          <div class="field">
            <label for="email">Correo electrónico</label>
            <span class="p-input-icon-left">
              <i class="pi pi-envelope"></i>
              <input
                type="email"
                pInputText
                id="email"
                formControlName="email"
                placeholder="Ingrese su correo electrónico"
                [ngClass]="{
                  'ng-invalid ng-dirty':
                    loginForm.get('email')?.invalid &&
                    loginForm.get('email')?.touched
                }"
              />
            </span>
            <small
              *ngIf="
                loginForm.get('email')?.invalid &&
                loginForm.get('email')?.touched
              "
              class="p-error"
            >
              Ingrese un correo electrónico válido
            </small>
          </div>

          <div class="field">
            <label for="password">Contraseña</label>
            <span class="p-input-icon-left">
              <i class="pi pi-lock"></i>
              <p-password
                id="password"
                formControlName="password"
                [feedback]="false"
                [toggleMask]="true"
                placeholder="Ingrese su contraseña"
                [ngClass]="{
                  'ng-invalid ng-dirty':
                    loginForm.get('password')?.invalid &&
                    loginForm.get('password')?.touched
                }"
              ></p-password>
            </span>
            <small
              *ngIf="
                loginForm.get('password')?.invalid &&
                loginForm.get('password')?.touched
              "
              class="p-error"
            >
              La contraseña debe tener al menos 6 caracteres
            </small>
          </div>

          <div class="form-actions">
            <p-button
              type="submit"
              label="Iniciar sesión"
              icon="pi pi-sign-in"
              [loading]="isLoading"
              [disabled]="loginForm.invalid || isLoading"
            ></p-button>
          </div>
        </div>
      </form>

      <ng-template pTemplate="footer">
        <div class="login-footer">
          <p>© 2025 Plataforma de Conocimiento para Laboratorios</p>
        </div>
      </ng-template>
    </p-card>
  </div>
</div>

<p-toast position="top-right"></p-toast>
